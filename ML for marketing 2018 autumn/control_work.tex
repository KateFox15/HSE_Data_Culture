%!TEX TS-program = xelatex
\documentclass[12pt, a4paper, oneside]{article}

\usepackage{amsmath,amsfonts,amssymb,amsthm,mathtools}  % пакеты для математики

\usepackage[english, russian]{babel} % выбор языка для документа
\usepackage[utf8]{inputenc} % задание utf8 кодировки исходного tex файла
\usepackage[X2,T2A]{fontenc}        % кодировка

\usepackage{fontspec}         % пакет для подгрузки шрифтов
\setmainfont{Linux Libertine O}   % задаёт основной шрифт документа

\usepackage{unicode-math}     % пакет для установки математического шрифта
\setmathfont[math-style=upright]{Neo Euler} % шрифт для математики

% Конкретный символ из конкретного шрифта
% \setmathfont[range=\int]{Neo Euler}


% Конкретный символ из конкретного шрифта
% \setmathfont[range=\int]{Neo Euler}

%%%%%%%%%% Работа с картинками %%%%%%%%%
\usepackage{graphicx}                  % Для вставки рисунков
\usepackage{graphics}
\graphicspath{{images/}{pictures/}}    % можно указать папки с картинками
\usepackage{wrapfig}                   % Обтекание рисунков и таблиц текстом

%%%%%%%%%%%%%%%%%%%%%%%% Графики и рисование %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{tikz, pgfplots}  % язык для рисования графики из latex'a

%%%%%%%%%% Гиперссылки %%%%%%%%%%
\usepackage{xcolor}              % разные цвета

\usepackage{hyperref}
\hypersetup{
	unicode=true,           % позволяет использовать юникодные символы
	colorlinks=true,       	% true - цветные ссылки, false - ссылки в рамках
	urlcolor=blue,          % цвет ссылки на url
	linkcolor=red,          % внутренние ссылки
	citecolor=green,        % на библиографию
	pdfnewwindow=true,      % при щелчке в pdf на ссылку откроется новый pdf
	breaklinks              % если ссылка не умещается в одну строку, разбивать ли ее на две части?
}


\usepackage{todonotes} % для вставки в документ заметок о том, что осталось сделать
% \todo{Здесь надо коэффициенты исправить}
% \missingfigure{Здесь будет Последний день Помпеи}
% \listoftodos --- печатает все поставленные \todo'шки

\usepackage[paper=a4paper, top=20mm, bottom=15mm,left=20mm,right=15mm]{geometry}
\usepackage{indentfirst}       % установка отступа в первом абзаце главы

\usepackage{setspace}
\setstretch{1.15}  % Межстрочный интервал
\setlength{\parskip}{4mm}   % Расстояние между абзацами
% Разные длины в латехе https://en.wikibooks.org/wiki/LaTeX/Lengths


\usepackage{xcolor} % Enabling mixing colors and color's call by 'svgnames'

\definecolor{MyColor1}{rgb}{0.2,0.4,0.6} %mix personal color
\newcommand{\textb}{\color{Black} \usefont{OT1}{lmss}{m}{n}}
\newcommand{\blue}{\color{MyColor1} \usefont{OT1}{lmss}{m}{n}}
\newcommand{\blueb}{\color{MyColor1} \usefont{OT1}{lmss}{b}{n}}
\newcommand{\red}{\color{LightCoral} \usefont{OT1}{lmss}{m}{n}}
\newcommand{\green}{\color{Turquoise} \usefont{OT1}{lmss}{m}{n}}

\usepackage{titlesec}
\usepackage{sectsty}
%%%%%%%%%%%%%%%%%%%%%%%%
%set section/subsections HEADINGS font and color
\sectionfont{\color{MyColor1}}  % sets colour of sections
\subsectionfont{\color{MyColor1}}  % sets colour of sections

%set section enumerator to arabic number (see footnotes markings alternatives)
\renewcommand\thesection{\arabic{section}.} %define sections numbering
\renewcommand\thesubsection{\thesection\arabic{subsection}} %subsec.num.

%define new section style
\newcommand{\mysection}{
	\titleformat{\section} [runin] {\usefont{OT1}{lmss}{b}{n}\color{MyColor1}} 
	{\thesection} {3pt} {} } 


%	CAPTIONS
\usepackage{caption}
\usepackage{subcaption}
%%%%%%%%%%%%%%%%%%%%%%%%
\captionsetup[figure]{labelfont={color=Turquoise}}

\pagestyle{empty}


%%%%%%%%%% Свои команды %%%%%%%%%%
\usepackage{etoolbox}    % логические операторы для своих макросов

% Все свои команды лучше всего определять не по ходу текста, как это сделано в этом документе, а в преамбуле!

% Одно из применений - уничтожение какого-то куска текста!
\newbool{answers}
%\booltrue{answers}
\boolfalse{answers}

\usepackage{enumitem}
% бульпоинты в списках
\definecolor{myblue}{rgb}{0, 0.45, 0.70}
\newcommand*{\MyPoint}{\tikz \draw [baseline, fill=myblue,draw=blue] circle (2.5pt);}
\renewcommand{\labelitemi}{\MyPoint}

% расстояние в списках
\setlist[itemize]{parsep=0.4em,itemsep=0em,topsep=0ex}
\setlist[enumerate]{parsep=0.4em,itemsep=0em,topsep=0ex}

\begin{document}

%\section*{Самостоятельная работа номер 1. Вариант I}
%
%\textbf{Решите все задания. Все ответы должны быть обоснованы. Все решения должны быть чётко приведены для каждого пункта. Рисунки должны быть чёткими, понятными. Все лнии должны быть подписаны. Списывание карается обнулением баллов. Удачи!}
%
%\subsection*{[7] Задание 1}
%
%Примените метод $K$-means с $K=4$. В качестве начальных точек используйте $(1,1)$, $(-1,1)$, $(0,-2)$, $(0,-3)$.	Опишите алгоритм выбора оптимального числа кластеров для $k-means$ (не надо это проделывать, просто опишите алгоритм).
%
%\begin{center}
%\includegraphics[scale=0.3]{knn_3.png}
%\end{center}
%
%
%\subsection*{[3] Задание 2}
%
%Обозначьте расположение центроидов и границ кластеров после применения метода K-means c $K=2$ на следущих данных: 
%
%\begin{minipage}[t]{0.66\textwidth}
%\begin{center}
%	\includegraphics[scale=0.15]{clouds.png}
%\end{center}
%\end{minipage}
%\begin{minipage}[t]{0.33\textwidth}
%\begin{center}
%	\includegraphics[scale=0.13]{circles.png}
%\end{center}
%\end{minipage}
%
%
%\newpage 
%
%
%\section*{Самостоятельная работа номер 2. Вариант I}
%
%\textbf{Решите все задания. Все ответы должны быть обоснованы. Все решения должны быть чётко приведены для каждого пункта. Рисунки должны быть чёткими, понятными. Все лнии должны быть подписаны. Списывание карается обнулением баллов. Удачи!}
%
%\subsection*{[2.5] Задание 1 }
%\begin{enumerate}
%	
%	\item  Мы стремимся переобучить любой алгоритм, так как в таком случае он хорошо запомнит выборку.
%	
%	\hspace{2cm} \textbf{Да}  \hspace{4cm} \textbf{Нет} 
%	
%	\item  Коэффициент силуэта используется, чтобы оценить успешность кластеризации и  расчитывается как доля правильно предсказанных кластеров.
%	
%	\hspace{2cm} \textbf{Да}  \hspace{4cm} \textbf{Нет} 
%	
%	\item  Качество модели может сильно зависеть от того как именно мы поделили. выборку на трэйн и тест. Чтобы сгладить этот эффект используют кросс-валидацию.
%	
%	\hspace{2cm} \textbf{Да}  \hspace{4cm} \textbf{Нет} 
%	
%	\item  Метод ближайших соседей никогда не переобучается. 
%	
%	\hspace{2cm} \textbf{Да}  \hspace{4cm} \textbf{Нет} 
%	
%	\item  Для задачи кластеризации, в отличие от задачи классификации, мы заранее знаем правильные ответы. 
%	
%	\hspace{2cm} \textbf{Да}  \hspace{4cm} \textbf{Нет} 
%	
%	\item  	Хорошо, то не было вопросов про случайный лес.
%	
%	\hspace{2cm} \textbf{Да}  \hspace{4cm} \textbf{Нет} 
%
%\end{enumerate}
%
%\subsection*{[6] Задание 2}
%
%На плоскости расположены колонии рыжих и чёрных муравьёв. Рыжих колоний три и они имеют координаты $(-1, 1)$, $(1, -1)$ и $(1, 1)$. Чёрных колоний одна и она имеет координаты $(0, 0)$.
%
%\begin{enumerate}
%\item Поделите плоскость на «зоны влияния» рыжих и чёрных используя метод одного и трёх ближайших соседей.
%
%\item С помощью кросс-валидации с выкидыванием отдельных наблюдений выберите оптимальное число соседей $k$ перебрав $k \in \{1, 3 \}$. Целевой функцией является количество несовпадающих прогнозов.
%\end{enumerate}
%
%
%\subsection*{[1.5] Задание 3}
%
%Объясните мемас: 
%
%\begin{center}
%	\includegraphics[scale=0.3]{memes2.jpg}
%\end{center}
%
%
%\newpage 
%
%
%\section*{Самостоятельная работа номер 3. Вариант I}
%
%\textbf{Решите все задания. Все ответы должны быть обоснованы. Все решения должны быть чётко приведены для каждого пункта. Рисунки должны быть чёткими, понятными. Все лнии должны быть подписаны. Списывание карается обнулением баллов. Удачи!}
%
%\subsection*{[3] Задание 1 }
%
%Драгомир пытается предсказать продажи видео-игр.  Для моделирования он использует две переменные: $x_1$ - возраст игры, $x_2$ - на кого она ориентирована. Если на мужчин, $x_2=1$, если на женщин, $x_2=0$. Целевая переменная $y$ - сумма продаж. Драгомир оценил линейную регрессию: 
%
%$$ y = 1000 - 100 \cdot  x_1 + 200 \cdot  x_2.$$
%
%Проинтерпретируйте полученные коэффициенты.  Предположим, что мы выпускаем на рынок свежую игру для женщин. Спрогнозируйте наши продажи. 
%
%
%\subsection*{[5] Задание 2}
%
%Маше $13$ лет. Всю свою жизнь она занималась коллекционированием моделей.  Вчера она пообщалась с Мишей. Он тоже коллекционер. Он спросил у неё, какое у её моделей качество? Маша не смогла ответить и решила проверить его. У неё есть три наблюдения $y_i$. Она для каждого построила прогнозы. Найдите для её прогнозов MAE и RMSE.
%
%\begin{center}
%	\begin{tabular}{c|c|c|c}
%		$y_i$ &  1 & 2 & 3 \\
%		\hline
%		Нейросеть & 2 & 3 & 1  \\
%		Регрессия &  2 & 3 & 4 \\
%		Лес & 1 & 1 & 1 \\
%	\end{tabular}
%\end{center}
%
%
%\subsection*{[2] Задание 3}
%
%Объясните мемас: 
%
%\begin{center}
%	\includegraphics[scale=0.7]{memes.png}
%\end{center}
%
%
%\newpage 


\section*{Долгожданный Кекс}

\subsection*{Постановка задачи} 

<<Волшебная лавка мистера Оливандера>> --- крупнейший онлайн-магазин волшебной атрибутики, недоступной для Маглов.  Её владелец, мистер Оливандер, недавно услышал о том, какую магию с его онлайн-ритейлом могут сотворить маркетологи, обученные анализу данных. Именно поэтому он пришёл за помощью к вам. 

Мистер Оливандер довольно продвинутый маг. Он знает, что жизненный цикл клиента удобно изображать с помощью <<воронки>>, описывающей движение человека по процессу покупки.  Он понимает, что иногда бывает так, что клиенты приуныли. Обычно это происходит при переходе с одного шага воронки на другой. 

Например, из 100 человек, увидевших рекламу, только 20 кликнут на неё и перейдут на сайт. Из перешедших на сайт только половина добавит товар в корзину, из добавивших товар в корзину, только четверть совершит покупку. На каждом этапе по каким-то причинам клиенты отваливаются. И это не очень круто. Увеличивая количество клиентов на каком-либо уровне воронки, мы автоматически увеличиваем результирующий объем продаж. Для этого надо как-то воздействовать на клиентов, но как именно непонятно. 

Мистер Оливандер очень хочет избежать состояния клиентов <<что-то приуныли>> и повысить ключевые показатели своего бизнеса. Что за ключевые показатели, он толком не определился и надеется на ваши дельные советы. Вам необходимо сделать следущие вещи: 

\begin{enumerate}
	\item Определить как выглядит воронка магического онлайн-ритейла и понять где именно при проходе по ней могут отваливаться клиенты. 
	
	\item Определиться, на какие ключевые показатели, то есть метрики, необходимо ориентироваться на каждом этапе воронки, чтобы понимать улучшилась ситуация или ухудшилась. Для каждого этапа сформулируйте пул из нескольких метрик.
	
	\item Понять как с помощью машинного обучения можно <<улучшить>> прохождение человека по воронке, определиться какие данные для этого использовать, откуда их взять. 
\end{enumerate}


\subsection*{Правила игры и оценивание} 

Кекс делается в группах по три человека. За сделанную работу группе выставляется $30$ баллов. Баллы нужно поделить между членами группы самостоятельно. 

Например, в группе работали Гермиона, Гарри и Рон. В итоге они получили $25$ баллов. Гермиона работала больше всех, команда решает отдать ей $15$ баллов. Гарри работал похуже, он получает $10$ баллов. Рон --- балбес, который ничего, по мнению команды, не делал. Он баллы не получает. 

Ваша итоговая оценка зависит от того, насколько глубоко проработана задача, насколько чётко обоснован каждый этап работы, каждая метрика.  Оцениваться будут следущие пойнты: 

\begin{itemize}
	\item Продуманность воронки, обоснованность каждой её части. 
	\item Продуманность и обоснованность системы метрик для монтиринга прохода по воронке. 	
	\item Адекватность данных, выбранных для оценивания модели.
	\item Обоснование выбранных переменных. Чётко объясните почему вы выбрали в качестве целевой переменной именно то, что вы выбрали. Постарайтесь объяснить как именно ваша модель поможет достичь желаемого результата. 
\end{itemize}

Обратите внимание, что от вас никто не требует описывать как вы делаете кросс-валидацию, дробите выборку и как вообще работает метод ближайшего соседа. Подразумевается, что это очевидно. Нас интересует именно ваше понимание того, как состыкуются между собой бизнес и машинное обучение, а не знание алгоритмов. 

\subsection*{Куда сдавать и когда сдавать}

На кекс у вас есть текущий семинар и ещё пара дней. Дедлайн - ???  Объём - ??? Две-три странички ворда без воды - ??? 


\subsection*{Дополнительная инфа: как ритейл собирает данные о нас}  

Для сбора данных и аналитики сайты используют специальные сервисы. Например, Яндекс.Метрику и Google Analytics. Эти сервисы позволяют анализировать то, что люди делают на сайте, с каких страниц они приходят, откуда они приходят (из поиска, с конкретного рекламного баннера и тп), какими демографическими характеристиками они обладают (пол, возраст, география и тп). 

Более того, для каждого пришедшего пользователя существуют очень разношёрстные данные о визитах: в какой последовательности он смотрел страницы, куда кликал мышью, как ей двигал и т.п.  Сервисы фактически показывает полную информацию о том, что происходит на сайте, позволяют выгрузить сырые данные и на их основе обучить какие-то модели. 

Предположим, что Невил два года назад зашёл на сайт к мистеру Оливандеру. Вчера он сделал это повторно. Как понять, что эти два захода принадлежат одному и тому же человеку? Обычно для этого используют систему из разных id. 

Если Невил заходил на сайт, используя свой личный кабинет, мы поймём, что это один и тот же человек по его внутреннему id. Другой способ идентифицировать человека --- использовать его аккаунт в google или яндексе.  Если человек зашёл на сайт, был залогинен в своей почте, и на сайте стояла метрика, мы сможем его отследить. 

Более слабым идентификатором является device-id устройства, с которого работает человек. Ясное дело, что сначала человек может зайти с телефона, потом с компьютера и, если он не залогинен, то система будет думать, что это два разных человека. 

Самым слабым идетификатором является id, построенный на основе куки человека. Если вы почистите в браузере куки, то этот id перезатрётся и система будет думать, что вы новый человек.  Используя такую вложенную систему из адишников, мы можем понимать где выполнял действия один и тот же человек. Более подробно про метрику и несколько кексов, связанных с ней,  рекомендую посмотреть интересную 30-минутную лекцию: \url{ https://events.yandex.ru/lib/talks/6063/}.  Возможно, вы почерпнёте из неё какие-то идеи для своего решения. 

В оффлайн-ритейле дело обстоит немного сложнее. Когда у магазина есть два чека в базе данных, он никак не может понять принадлежат они одному и тому же человеку или нет. Чтобы как-то исправить эту ситуацию и научиться агрегировать покупки, магазины придумывают всякие ухищрения, позволяющие им накопить данные. Например, систему бонусных карт, по id которых можно понять, что чеки принадлежат одному и тому же человеку. 



\end{document}



